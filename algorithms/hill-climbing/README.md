# Hill Climbing（山登り法）アルゴリズム

## 概要

Hill Climbing（山登り法）は、局所探索アルゴリズムの一種で、最適化問題を解くために使用されます。現在の解から近傍の解を生成し、より良い解が見つかればそれに移動することを繰り返します。

このプログラムでは、数学関数 `f(x) = -x² + 4x + 10` の最大値を見つける例を実装しています。

## アルゴリズムの特徴

### 長所
- シンプルで理解しやすい
- 実装が容易
- メモリ使用量が少ない
- 計算コストが低い

### 短所
- 局所最適解に陥る可能性がある
- 初期解の選び方に依存する
- 平坦な領域で停滞することがある

## アルゴリズムの流れ

```
┌─────────────────────┐
│   開始              │
└──────┬──────────────┘
       │
       ↓
┌─────────────────────┐
│ 初期解を設定        │
│ x = 0.0             │
└──────┬──────────────┘
       │
       ↓
┌─────────────────────┐
│ 現在の解を評価      │
│ current_value =     │
│ f(current_x)        │
└──────┬──────────────┘
       │
       ↓
┌─────────────────────┐
│ 近傍解を生成        │
│ neighbor = current  │
│   ± random(stepSize)│
└──────┬──────────────┘
       │
       ↓
┌─────────────────────┐
│ 近傍解を評価        │
│ neighbor_value =    │
│ f(neighbor)         │
└──────┬──────────────┘
       │
       ↓
    ┌──┴──┐
    │比較  │
    └──┬──┘
       │
   ┌───┴───┐
   │       │
  Yes      No
   │       │
   ↓       │
┌─────┐    │
│更新  │    │
│current│   │
│ = neighbor│
└──┬──┘    │
   │       │
   └───┬───┘
       │
       ↓
    ┌──┴──┐
    │反復  │
    │終了？│
    └──┬──┘
       │
   ┌───┴───┐
   │       │
  No      Yes
   │       │
   └→ループ │
           ↓
    ┌─────────────┐
    │ 最終解を出力 │
    └──────┬──────┘
           │
           ↓
    ┌─────────────┐
    │   終了       │
    └──────────────┘
```

## 詳細な処理フロー

### 1. 初期化
```
初期解: x = 0.0
ステップサイズ: 0.5
最大反復回数: 100
```

### 2. 評価関数
目的関数 `f(x) = -x² + 4x + 10` を評価します。
- この関数は放物線で、x = 2 のときに最大値 14 をとります

### 3. 近傍探索
現在の解 x から、±stepSize の範囲でランダムに新しい解を生成します。
```
neighbor = current_x + random(-0.5, +0.5)
```

### 4. 解の更新
```
if f(neighbor) > f(current_x):
    current_x = neighbor  // 改善された場合のみ更新
```

### 5. 終了条件
最大反復回数に達したら終了します。

## 拡張版: ランダムリスタート

局所最適解の問題を軽減するため、複数の初期解から探索を開始し、最良の結果を採用する手法も実装されています。

```
┌─────────────────────────┐
│  複数の初期解を生成     │
└────────┬────────────────┘
         │
         ↓
    ┌────┴────┐
    │ For each │
    │ 初期解   │
    └────┬────┘
         │
         ↓
┌─────────────────────────┐
│  Hill Climbing 実行     │
└────────┬────────────────┘
         │
         ↓
┌─────────────────────────┐
│  最良解を記録           │
└────────┬────────────────┘
         │
         ↓
    ┌────┴────┐
    │ 次の初期解│
    │ がある？  │
    └────┬────┘
         │
     ┌───┴───┐
    Yes      No
     │       │
     └→ループ │
             ↓
    ┌─────────────────┐
    │ 最良解を出力    │
    └─────────────────┘
```

## 実行方法

```bash
go run main.go
```

## 出力例

```
Hill Climbing アルゴリズムのデモ
目的関数: f(x) = -x^2 + 4x + 10
目標: f(x) の最大値を見つける

=== Hill Climbing アルゴリズム開始 ===
初期解: x = 0.0000, f(x) = 10.0000

反復 1: 改善発見!
  現在解: x = 0.0000, f(x) = 10.0000
  新解:   x = 0.2341, f(x) = 10.8820
  改善量: 0.8820

...

=== Hill Climbing アルゴリズム終了 ===
最終解: x = 1.9876, f(x) = 13.9998
総改善回数: 45 / 100 回の反復

理論的最適解: x = 2.0000, f(x) = 14.0000
誤差: 0.0124
```

## コードの主要な関数

### `evaluationFunction(x float64) float64`
目的関数を計算します。最大化したい関数を定義します。

### `generateNeighbor() float64`
現在の解の近傍解を生成します。ランダムに±stepSize の範囲で新しい値を返します。

### `Solve()`
基本的な Hill Climbing アルゴリズムを実行し、結果を表示します。

### `SolveWithRandomRestart()`
複数の初期解から探索を開始するランダムリスタート版を実行します。

## パラメータの調整

- `initialSolution`: 初期解（探索の開始点）
- `stepSize`: 近傍探索の範囲（大きいほど大きく移動）
- `maxIterations`: 最大反復回数（多いほど精度向上の可能性）
- `numRestarts`: ランダムリスタートの回数

## 学習ポイント

1. **局所探索の基本**: より良い解を段階的に探す基本的な手法
2. **貪欲法**: 各ステップで最良の選択をする戦略
3. **局所最適解の問題**: ランダムリスタートなどの対策が必要
4. **評価関数の重要性**: 問題に応じた適切な評価関数の設計

## 応用例

- 経路最適化
- スケジューリング問題
- 機械学習のハイパーパラメータ調整
- ゲームAI
- 組み合わせ最適化
